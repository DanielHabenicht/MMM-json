# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

tasks:
  # Init MagicMirror
  - init: | 
      cd /workspace 
      git clone https://github.com/MichMich/MagicMirror
      cd /workspace/MagicMirror
      npm install 
      echo '
      // see https://docs.magicmirror.builders/getting-started/configuration.html#general
      // and https://docs.magicmirror.builders/modules/configuration.html
      let config = {
        address: "localhost", // Address to listen on, can be:
        // - "localhost", "127.0.0.1", "::1" to listen on loopback interface
        // - another specific IPv4/6 to listen on a specific interface
        // - "0.0.0.0", "::" to listen on any interface
        // Default, when address config is left out or empty, is "localhost"
        port: 8080,
        basePath: "/", // The URL path where MagicMirror is hosted. If you are using a Reverse proxy
        // you must set the sub path here. basePath must end with a /
        ipWhitelist: ["127.0.0.1", "::ffff:127.0.0.1", "::1"], // Set [] to allow all IP addresses
        // or add a specific IPv4 of 192.168.1.5 :
        // ["127.0.0.1", "::ffff:127.0.0.1", "::1", "::ffff:192.168.1.5"],
        // or IPv4 range of 192.168.3.0 --> 192.168.3.15 use CIDR format :
        // ["127.0.0.1", "::ffff:127.0.0.1", "::1", "::ffff:192.168.3.0/28"],

        useHttps: false, // Support HTTPS or not, default "false" will use HTTP
        httpsPrivateKey: "", // HTTPS private key path, only require when useHttps is true
        httpsCertificate: "", // HTTPS Certificate path, only require when useHttps is true

        language: "en",
        locale: "en-US",
        logLevel: ["INFO", "LOG", "WARN", "ERROR"], // Add "DEBUG" for even more logging
        timeFormat: 24,
        units: "metric",
        // serverOnly:  true/false/"local" ,
        // local for armv6l processors, default
        //   starts serveronly and then starts chrome browser
        // false, default for all NON-armv6l devices
        // true, force serveronly mode, because you want to.. no UI on this device

        modules: [
          {
            module: "MMM-json",
            position: "bottom_left",
            config: {
              url: " http://localhost:3000/test",
              headerIcon: "fa-cube",
              // jq: 'keyBy("name") | mapValues(a => [a.address.street,a.address.suite,a.address.city].join(", "))',
              // values: [
              // 	{
              // 		title: "Name",
              // 		query: "$[1].name"
              // 	},
              // 	{
              // 		title: "Coordinate 1",
              // 		query: "$[?(@.id==2)].address.geo.lat",
              // 		prefix: "LAT",
              // 		suffix: "°"
              // 	},
              // 	{
              // 		title: "Coordinate 2",
              // 		query: "$[?(@.name=='Ervin Howell')].address.geo.lat",
              // 		prefix: "LON",
              // 		suffix: "°"
              // 	}
              // ],
              styleRules: [
                // Provide custom style rules for any value
                {
                  match: (value) => value == 1,
                  style: "color: red;",
                  class: "large"
                }
              ]
            }
          }
        ]
      };
      /*************** DO NOT EDIT THE LINE BELOW ***************/
      if (typeof module !== "undefined") {
        module.exports = config;
      }
      ' > /workspace/MagicMirror/config/config.js
      ln -s /workspace/MMM-JSON /workspace/MagicMirror/modules/MMM-json
    command: npm run server
    
  - init: | 
      npm install
  - command: |
      echo '{
        "test": {
          "id": 1,
          "title": "json-server",
          "author": "typicode",
          "test": ["test1", "test2"]
        }
      }
      ' > db.json
      npm install -g json-server
      json-server --watch db.json
vscode:
  extensions:
    - dbaeumer.vscode-eslint

